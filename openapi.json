{
  "openapi": "3.1.0",
  "info": { "title": "Churchill Application Portal", "version": "1.0.0" },
  "paths": {
    "/api/v1/applications": {
      "post": {
        "tags": ["Applications"],
        "summary": "Create Application Draft",
        "description": "Create new application in DRAFT stage.\n\n**Permissions:** AGENT ONLY. Only agents can create applications on behalf of students.\nAgents are responsible for filling all application details for their students.",
        "operationId": "create_application_draft_api_v1_applications_post",
        "security": [{ "HTTPBearer": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplicationCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApplicationResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Applications"],
        "summary": "List Applications",
        "description": "List applications with filtering.\n\n**Permissions:**\n- Students: see only their own applications\n- Agents: see applications they submitted\n- Staff/Admin: see all applications (with filters)",
        "operationId": "list_applications_api_v1_applications_get",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "stage",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                { "$ref": "#/components/schemas/ApplicationStage" },
                { "type": "null" }
              ],
              "description": "Filter by stage",
              "title": "Stage"
            },
            "description": "Filter by stage"
          },
          {
            "name": "student_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                { "type": "string", "format": "uuid" },
                { "type": "null" }
              ],
              "description": "Filter by student",
              "title": "Student Id"
            },
            "description": "Filter by student"
          },
          {
            "name": "agent_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                { "type": "string", "format": "uuid" },
                { "type": "null" }
              ],
              "description": "Filter by agent",
              "title": "Agent Id"
            },
            "description": "Filter by agent"
          },
          {
            "name": "assigned_staff_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                { "type": "string", "format": "uuid" },
                { "type": "null" }
              ],
              "description": "Filter by assigned staff",
              "title": "Assigned Staff Id"
            },
            "description": "Filter by assigned staff"
          },
          {
            "name": "from_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                { "type": "string", "format": "date-time" },
                { "type": "null" }
              ],
              "description": "Filter by created date (from)",
              "title": "From Date"
            },
            "description": "Filter by created date (from)"
          },
          {
            "name": "to_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                { "type": "string", "format": "date-time" },
                { "type": "null" }
              ],
              "description": "Filter by created date (to)",
              "title": "To Date"
            },
            "description": "Filter by created date (to)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ApplicationSummary"
                  },
                  "title": "Response List Applications Api V1 Applications Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}": {
      "get": {
        "tags": ["Applications"],
        "summary": "Get Application",
        "description": "Get full application details.\n\nUsed for resuming draft or viewing submitted application.",
        "operationId": "get_application_api_v1_applications__application_id__get",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApplicationDetail" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Applications"],
        "summary": "Update Application",
        "description": "Update application (auto-save or manual save).\n\n**Permissions:** AGENT ONLY. Only agents can edit applications.\nAgents fill the entire application form on behalf of students.\nSupports partial updates - only provided fields are updated.",
        "operationId": "update_application_api_v1_applications__application_id__patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplicationUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApplicationResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/submit": {
      "post": {
        "tags": ["Applications"],
        "summary": "Submit Application",
        "description": "Submit application for review.\n\n**Permissions:** AGENT ONLY. Only agents can submit applications.\nTransitions from DRAFT â†’ SUBMITTED stage.\nValidates all required fields are completed.",
        "operationId": "submit_application_api_v1_applications__application_id__submit_post",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplicationSubmitRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApplicationResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/assign": {
      "post": {
        "tags": ["Applications"],
        "summary": "Assign Application",
        "description": "Assign application to staff member.\n\n**Permissions:** Staff/Admin only",
        "operationId": "assign_application_api_v1_applications__application_id__assign_post",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplicationAssignRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApplicationResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/change-stage": {
      "post": {
        "tags": ["Applications"],
        "summary": "Change Application Stage",
        "description": "Transition application to new stage.\n\n**Permissions:** Staff/Admin only",
        "operationId": "change_application_stage_api_v1_applications__application_id__change_stage_post",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplicationStageChangeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApplicationResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/1/personal-details": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Personal Details",
        "description": "**Step 1/12: Personal Details**\n\nUpdate student's personal information including contact details and identity documents.",
        "operationId": "update_personal_details_api_v1_applications__application_id__steps_1_personal_details_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PersonalDetailsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/2/emergency-contact": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Emergency Contact",
        "description": "**Step 2/12: Emergency Contact**\n\nAdd emergency contact information (at least one required).",
        "operationId": "update_emergency_contact_api_v1_applications__application_id__steps_2_emergency_contact_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmergencyContactRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/3/health-cover": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Health Cover",
        "description": "**Step 3/12: Health Cover (OSHC)**\n\nProvide Overseas Student Health Cover details.",
        "operationId": "update_health_cover_api_v1_applications__application_id__steps_3_health_cover_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/HealthCoverRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/4/language-cultural": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Language Cultural",
        "description": "**Step 4/12: Language & Cultural Background**\n\nProvide language proficiency and cultural background information.",
        "operationId": "update_language_cultural_api_v1_applications__application_id__steps_4_language_cultural_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LanguageCulturalRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/5/disability-support": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Disability Support",
        "description": "**Step 5/12: Disability Support**\n\nProvide information about any disability and required support.",
        "operationId": "update_disability_support_api_v1_applications__application_id__steps_5_disability_support_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DisabilitySupportRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/6/schooling-history": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Schooling History",
        "description": "**Step 6/12: Schooling History**\n\nAdd educational background (at least one entry required).",
        "operationId": "update_schooling_history_api_v1_applications__application_id__steps_6_schooling_history_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchoolingHistoryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/7/qualifications": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Qualifications",
        "description": "**Step 7/12: Previous Qualifications**\n\nAdd professional qualifications and certifications (optional).",
        "operationId": "update_qualifications_api_v1_applications__application_id__steps_7_qualifications_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PreviousQualificationsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/8/employment-history": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Employment History",
        "description": "**Step 8/12: Employment History**\n\nAdd work experience (optional).",
        "operationId": "update_employment_history_api_v1_applications__application_id__steps_8_employment_history_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmploymentHistoryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/9/usi": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Usi",
        "description": "**Step 9/12: USI (Unique Student Identifier)**\n\nProvide USI details (required for enrollment).",
        "operationId": "update_usi_api_v1_applications__application_id__steps_9_usi_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/USIRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/10/additional-services": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Additional Services",
        "description": "**Step 10/12: Additional Services**\n\nSelect optional services (accommodation, airport pickup, etc.).",
        "operationId": "update_additional_services_api_v1_applications__application_id__steps_10_additional_services_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdditionalServicesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/11/survey": {
      "patch": {
        "tags": ["Application Steps"],
        "summary": "Update Survey",
        "description": "**Step 11/12: Survey**\n\nComplete pre-enrollment survey.",
        "operationId": "update_survey_api_v1_applications__application_id__steps_11_survey_patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SurveyRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StepUpdateResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/applications/{application_id}/steps/12/documents": {
      "get": {
        "tags": ["Application Steps"],
        "summary": "Get Document Status",
        "description": "**Step 12/12: Document Upload Status**\n\nView status of required documents (actual upload handled separately).",
        "operationId": "get_document_status_api_v1_applications__application_id__steps_12_documents_get",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "application_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Application Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentStepResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "securitySchemes": { "HTTPBearer": { "type": "http", "scheme": "bearer" } }
  }
}
